# Решение проблемы с авторизацией новых аккаунтов

## Проблема
Instagram блокирует автоматизированные авторизации через прокси, даже если прокси работает в браузере.

## Решение 1: Импорт сессий из браузера (РЕКОМЕНДУЕТСЯ)

### Как это работает:
1. Пользователь авторизуется в браузере через прокси
2. Экспортирует сессию из браузера (cookies, session data)
3. Импортирует сессию в наш сервис
4. Сервис использует сохраненную сессию для всех операций

### Преимущества:
- ✅ Работает для новых аккаунтов
- ✅ Не требует автоматической авторизации
- ✅ Прокси работает для всех операций после импорта сессии

### Реализация:
Нужно добавить endpoint для импорта сессий:
- POST /api/accounts/{id}/import-session
- Принимает session_data (JSON из браузера)
- Сохраняет в БД
- Аккаунт сразу становится ACTIVE

## Решение 2: Использовать резидентные прокси

### Проблема с текущими прокси:
- Датацентровые прокси (topfriendcorp) часто в черном списке Instagram
- Instagram легко определяет их как автоматизированные

### Решение:
- Использовать резидентные прокси (ISP прокси)
- Они выглядят как реальные пользователи
- Меньше вероятность блокировки

## Решение 3: Прогрев аккаунтов

### Как это работает:
1. Авторизуйте аккаунт вручную в браузере
2. Используйте аккаунт как обычный пользователь (лайки, просмотры)
3. Через несколько дней аккаунт "прогреется"
4. Затем можно использовать в автоматизации

## Решение 4: Использовать официальный Instagram API

### Проблема:
- Instagram Basic Display API требует модерации
- Instagram Graph API требует бизнес-аккаунт
- Ограниченная функциональность

### Но:
- Более стабильный доступ
- Официальная поддержка

## Текущее состояние

### Что работает:
- ✅ Для уже авторизованных аккаунтов все работает (обновление профиля, постинг)
- ✅ Прокси работает для всех операций, кроме новой авторизации

### Что не работает:
- ❌ Автоматическая авторизация новых аккаунтов через прокси

## Рекомендация

**Добавить функционал импорта сессий из браузера** - это решит проблему с новыми аккаунтами и сделает сервис полноценным.



